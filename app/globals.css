:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 240, 242, 245;
  --background-end-rgb: 255, 255, 255;

  /* New Design System Variables */
  --brand-hue: 220;
  --brand-saturation: 70%;
  --brand-lightness: 55%;
  --brand-primary: hsl(var(--brand-hue), var(--brand-saturation), var(--brand-lightness));
  --brand-primary-light: hsl(var(--brand-hue), var(--brand-saturation), 95%);
  --brand-primary-dark: hsl(var(--brand-hue), var(--brand-saturation), 45%);

  --text-primary: #2d3748;
  --text-secondary: #4a5568;
  --text-muted: #718096;
  --text-disabled: #a0aec0;
  --border-color: #e2e8f0;
  --input-bg: #ffffff;
  --card-bg: #ffffff;
  --card-body-bg-blue: #f7fafc;
  --card-body-bg-stone: #fafaf9;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

  /* Card Header Backgrounds */
  --card-header-bg-blue: linear-gradient(135deg, #dbeafe 0%, #eff6ff 100%);
  --card-header-bg-stone: linear-gradient(135deg, #fafaf9 0%, #f5f5f4 100%);
  --card-header-bg-violet: linear-gradient(135deg, #ede9fe 0%, #f5f3ff 100%);

  /* Text Gradients */
  --gradient-text-blue: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
  --gradient-text-stone: linear-gradient(135deg, #78716c 0%, #57534e 100%);
  --gradient-text-violet: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);

  /* Footer */
  --footer-text-primary-gradient: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);

  /* Profit/Loss Colors */
  --profit-color: #10b981;
  --profit-bg: rgba(16, 185, 129, 0.1);
  --loss-color: #ef4444;
  --loss-bg: rgba(239, 68, 68, 0.1);
  --neutral-color: #6b7280;
  --neutral-bg: rgba(107, 114, 128, 0.1);

  /* Accordion */
  --accordion-icon-invert: 0;
}

[data-theme="dark"] {
  --foreground-rgb: 255, 255, 255;
  --background-start-rgb: 17, 24, 39;
  --background-end-rgb: 10, 10, 15;

  /* New Design System Variables */
  --brand-saturation: 75%;
  --brand-lightness: 60%;

  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;
  --text-muted: #6b7280;
  --text-disabled: #4b5563;
  --border-color: #374151;
  --input-bg: #1f2937;
  --card-bg: #1f2937;
  --card-body-bg-blue: #111827;
  --card-body-bg-stone: #1c1917;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);

  /* Card Header Backgrounds */
  --card-header-bg-blue: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
  --card-header-bg-stone: linear-gradient(135deg, #292524 0%, #1c1917 100%);
  --card-header-bg-violet: linear-gradient(135deg, #5b21b6 0%, #6d28d9 100%);

  /* Text Gradients */
  --gradient-text-blue: linear-gradient(135deg, #60a5fa 0%, #93c5fd 100%);
  --gradient-text-stone: linear-gradient(135deg, #a8a29e 0%, #d6d3d1 100%);
  --gradient-text-violet: linear-gradient(135deg, #a78bfa 0%, #c4b5fd 100%);

  /* Footer */
  --footer-text-primary-gradient: linear-gradient(135deg, #60a5fa 0%, #93c5fd 100%);

  /* Profit/Loss Colors */
  --profit-color: #34d399;
  --profit-bg: rgba(52, 211, 153, 0.15);
  --loss-color: #f87171;
  --loss-bg: rgba(248, 113, 113, 0.15);
  --neutral-color: #9ca3af;
  --neutral-bg: rgba(156, 163, 175, 0.15);

  /* Accordion */
  --accordion-icon-invert: 1;
}

body {
  color: var(--text-primary);
  background: linear-gradient(
      180deg,
      rgb(var(--background-start-rgb)) 0%,
      rgb(var(--background-end-rgb)) 100%
    );
  font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Input Placeholder Styles for Dark Mode */
input::placeholder,
textarea::placeholder {
  color: var(--text-muted) !important;
  opacity: 1 !important;
}

input::-webkit-input-placeholder,
textarea::-webkit-input-placeholder {
  color: var(--text-muted) !important;
  opacity: 1 !important;
}

input::-moz-placeholder,
textarea::-moz-placeholder {
  color: var(--text-muted) !important;
  opacity: 1 !important;
}

input:-ms-input-placeholder,
textarea:-ms-input-placeholder {
  color: var(--text-muted) !important;
  opacity: 1 !important;
}

/* Form Control Styles for Dark Mode */
.form-control {
  background-color: var(--input-bg) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

.form-control:focus {
  background-color: var(--input-bg) !important;
  color: var(--text-primary) !important;
  border-color: var(--brand-primary) !important;
}

.form-control:disabled {
  background-color: var(--input-bg) !important;
  color: var(--text-disabled) !important;
  opacity: 0.7;
}

.refining-checkbox .form-check-input {
  background-color: var(--input-bg);
  border-color: var(--border-color);
  transition: all 0.2s ease;
}
.refining-checkbox .form-check-input:checked {
  background-color: var(--brand-primary);
  border-color: var(--brand-primary);
}
.refining-checkbox .form-check-input:focus {
  box-shadow: 0 0 0 3px hsla(var(--brand-hue), var(--brand-saturation), var(--brand-lightness), 0.3);
}

/* Table Styles for Dark Mode */
.raid-table {
  background-color: var(--card-bg) !important;
  color: var(--text-primary) !important;
}

.raid-table thead {
  background-color: var(--card-bg) !important;
  color: var(--text-primary) !important;
}

.raid-table tbody {
  background-color: var(--card-bg) !important;
  color: var(--text-primary) !important;
}

.raid-table th,
.raid-table td {
  background-color: var(--card-bg) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

.raid-table tbody tr:hover td {
  background-color: var(--card-body-bg-blue) !important;
}

/* Override Bootstrap striped table styles */
.raid-table.table-striped tbody tr:nth-of-type(odd) > * {
  background-color: var(--card-bg) !important;
  color: var(--text-primary) !important;
}

.raid-table.table-striped tbody tr:nth-of-type(even) > * {
  background-color: var(--card-body-bg-blue) !important;
  color: var(--text-primary) !important;
}

/* Accordion Styles for Dark Mode */
.theme-accordion .accordion-item {
  background-color: var(--card-bg) !important;
  border-color: var(--border-color) !important;
}

.theme-accordion .accordion-button {
  background-color: var(--card-bg) !important;
  color: var(--text-primary) !important;
}

.theme-accordion .accordion-button:not(.collapsed) {
  background-color: var(--card-body-bg-blue) !important;
  color: var(--text-primary) !important;
}

.theme-accordion .accordion-button:focus {
  box-shadow: none !important;
  border-color: var(--border-color) !important;
}

.theme-accordion .accordion-button::after {
  filter: invert(var(--accordion-icon-invert, 0));
}

.theme-accordion .accordion-button span,
.theme-accordion .accordion-button div {
  color: var(--text-primary) !important;
}

.theme-accordion .accordion-body {
  background-color: var(--card-bg) !important;
  color: var(--text-primary) !important;
}

.raid-group-accordion,
.raid-difficulty-accordion {
  background-color: var(--card-bg) !important;
  border-color: var(--border-color) !important;
}

.raid-group-accordion .accordion-header,
.raid-difficulty-accordion .accordion-header {
  background-color: var(--card-bg) !important;
}

.raid-group-accordion .accordion-button,
.raid-difficulty-accordion .accordion-button {
  background-color: var(--card-bg) !important;
  color: var(--text-primary) !important;
}

.raid-group-accordion .accordion-button:not(.collapsed),
.raid-difficulty-accordion .accordion-button:not(.collapsed) {
  background-color: var(--card-body-bg-blue) !important;
  color: var(--text-primary) !important;
}

.raid-group-accordion .accordion-button span,
.raid-group-accordion .accordion-button div,
.raid-difficulty-accordion .accordion-button span,
.raid-difficulty-accordion .accordion-button div {
  color: var(--text-primary) !important;
}

.raid-group-accordion .accordion-button::after,
.raid-difficulty-accordion .accordion-button::after {
  filter: invert(var(--accordion-icon-invert, 0));
}

.raid-group-accordion .accordion-body,
.raid-difficulty-accordion .accordion-body {
  background-color: var(--card-bg) !important;
}

/* Card Styles for Dark Mode */
.character-raid-card {
  background-color: var(--card-bg);
  border-color: var(--border-color);
}

.character-raid-header {
  background-color: var(--card-header-bg);
  border-color: var(--border-color);
  color: var(--text-primary);
}

/* Badge Styles */
.badge.bg-success,
.badge.bg-success * {
  --bs-badge-color: #ffffff !important;
  color: #ffffff !important;
}

.badge.bg-danger,
.badge.bg-danger * {
  --bs-badge-color: #ffffff !important;
  color: #ffffff !important;
}

.badge.bg-secondary,
.badge.bg-secondary * {
  --bs-badge-color: #ffffff !important;
  color: #ffffff !important;
}

/* Light mode specific badge colors */
:root .badge.bg-success,
:root .badge.bg-danger,
:root .badge.bg-secondary {
  color: #ffffff !important;
}

/* Dark mode specific badge colors */
[data-theme="dark"] .badge.bg-success,
[data-theme="dark"] .badge.bg-danger,
[data-theme="dark"] .badge.bg-secondary {
  color: #ffffff !important;
}

/* Footer Styles */
.footer-fixed {
  margin-top: 80px;
  padding: 30px 0;
  border-top: 1px solid var(--border-color);
}

@media (max-width: 768px) {
  .footer-fixed {
    margin-top: 60px;
    padding: 20px 0;
  }
}